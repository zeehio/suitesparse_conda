diff -Naur SuiteSparse/AMD/Lib/GNUmakefile suitesparse-4.2patched/AMD/Lib/GNUmakefile
--- AMD/Lib/GNUmakefile	2012-05-29 23:56:26.000000000 +0200
+++ AMD/Lib/GNUmakefile	2015-10-25 13:54:23.257044000 +0100
@@ -2,7 +2,10 @@
 # AMD Makefile for compiling on Unix systems (for GNU make only)
 #-------------------------------------------------------------------------------
 
-default: libamd.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_AMD)
+
+default: libamd.a libamd.so.$(SOVERSION)
 
 include ../../SuiteSparse_config/SuiteSparse_config.mk
 
@@ -26,18 +29,27 @@
 AMDI = $(addsuffix .o, $(subst amd_,amd_i_,$(AMD)))
 AMDL = $(addsuffix .o, $(subst amd_,amd_l_,$(AMD)))
 
+AMDI_SL = $(addsuffix .oo, $(subst amd_,amd_i_,$(AMD)))
+AMDL_SL = $(addsuffix .oo, $(subst amd_,amd_l_,$(AMD)))
+
 #-------------------------------------------------------------------------------
 # compile each int and long routine (with no real/complex version)
 #-------------------------------------------------------------------------------
 
 amd_global.o: ../Source/amd_global.c $(INC)
 	$(C) -c $< -o $@
+amd_global.oo: ../Source/amd_global.c $(INC)
+	$(C) -fPIC -c $< -o $@
 
 amd_i_%.o: ../Source/amd_%.c $(INC)
 	$(C) -DDINT -c $< -o $@
+amd_i_%.oo: ../Source/amd_%.c $(INC)
+	$(C) -fPIC -DDINT -c $< -o $@
 
 amd_l_%.o: ../Source/amd_%.c $(INC)
 	$(C) -DDLONG -c $< -o $@
+amd_l_%.oo: ../Source/amd_%.c $(INC)
+	$(C) -fPIC -DDLONG -c $< -o $@
 
 #-------------------------------------------------------------------------------
 # Create the libamd.a library (C versions only)
@@ -47,6 +59,10 @@
 	$(ARCHIVE) libamd.a $^
 	- $(RANLIB) libamd.a
 
+libamd.so.$(SOVERSION): amd_global.oo $(AMDI_SL) $(AMDL_SL)
+	$(CC) $(LDFLAGS) -shared $^ -lm -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libamd.so
+
 #-------------------------------------------------------------------------------
 # compile the Fortran versions and the libamdf77.a library
 #-------------------------------------------------------------------------------
@@ -71,6 +87,9 @@
 
 clean:
 	- $(RM) $(CLEAN)
+	-$(RM) *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
 
 purge: distclean
 
diff -Naur SuiteSparse/AMD/Makefile suitesparse-4.2patched/AMD/Makefile
--- AMD/Makefile	2012-06-19 21:03:50.000000000 +0200
+++ AMD/Makefile	2015-10-25 15:03:12.051947463 +0100
@@ -60,6 +60,8 @@
 
 # install AMD
 install:
+	$(CP) Lib/libamd.so $(INSTALL_LIB)/libamd.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libamd.$(VERSION).so libamd.so )
 	$(CP) Lib/libamd.a $(INSTALL_LIB)/libamd.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libamd.$(VERSION).a libamd.a )
 	$(CP) Include/amd.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/BTF/Lib/Makefile suitesparse-4.2patched/BTF/Lib/Makefile
--- BTF/Lib/Makefile	2012-05-27 01:21:33.000000000 +0200
+++ BTF/Lib/Makefile	2015-10-25 13:55:04.377043000 +0100
@@ -15,38 +15,59 @@
 
 all: library
 
-library: libbtf.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_BTF)
+
+library: libbtf.a libbtf.so.$(SOVERSION)
 
 OBJ = btf_order.o btf_maxtrans.o btf_strongcomp.o \
     btf_l_order.o btf_l_maxtrans.o btf_l_strongcomp.o
+OBJ_SL = $(subst .o,.oo,$(OBJ))
 
 libbtf.a: $(OBJ)
 	$(ARCHIVE)  libbtf.a $(OBJ)
 	- $(RANLIB) libbtf.a
 
-$(OBJ): $(INC)
+libbtf.so.$(SOVERSION): $(OBJ_SL)
+	$(CC) $(LDFLAGS) -shared $^ -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libbtf.so
+
+$(OBJ) $(OBJ_SL): $(INC)
+
 
 #-------------------------------------------------------------------------------
 
 btf_order.o: ../Source/btf_order.c
 	$(C) -c $(I) $< -o $@
+btf_order.oo: ../Source/btf_order.c
+	$(C) -fPIC  -c $(I) $< -o $@
 
 btf_maxtrans.o: ../Source/btf_maxtrans.c
 	$(C) -c $(I) $< -o $@
+btf_maxtrans.oo: ../Source/btf_maxtrans.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 btf_strongcomp.o: ../Source/btf_strongcomp.c
 	$(C) -c $(I) $< -o $@
+btf_strongcomp.oo: ../Source/btf_strongcomp.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 btf_l_order.o: ../Source/btf_order.c
-	$(C) -c $(I) -DDLONG $< -o $@
+	$(C)  -c $(I) -DDLONG $< -o $@
+btf_l_order.oo: ../Source/btf_order.c
+	$(C) -fPIC -c $(I) -DDLONG $< -o $@
 
 btf_l_maxtrans.o: ../Source/btf_maxtrans.c
 	$(C) -c $(I) -DDLONG $< -o $@
+btf_l_maxtrans.oo: ../Source/btf_maxtrans.c
+	$(C) -fPIC -c $(I) -DDLONG $< -o $@
 
 btf_l_strongcomp.o: ../Source/btf_strongcomp.c
 	$(C) -c $(I) -DDLONG $< -o $@
+btf_l_strongcomp.oo: ../Source/btf_strongcomp.c
+	$(C) -fPIC -c $(I) -DDLONG $< -o $@
 
 #-------------------------------------------------------------------------------
 
@@ -57,3 +78,6 @@
 
 clean:
 	- $(RM) $(CLEAN)
+	-$(RM) *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
diff -Naur SuiteSparse/BTF/Makefile suitesparse-4.2patched/BTF/Makefile
--- BTF/Makefile	2012-05-28 21:55:44.000000000 +0200
+++ BTF/Makefile	2015-10-25 15:05:18.747942135 +0100
@@ -23,6 +23,8 @@
 
 # install BTF
 install:
+	$(CP) Lib/libbtf.so $(INSTALL_LIB)/libbtf.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libbtf.$(VERSION).so libbtf.so )
 	$(CP) Lib/libbtf.a $(INSTALL_LIB)/libbtf.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libbtf.$(VERSION).a libbtf.a )
 	$(CP) Include/btf.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/CAMD/Lib/GNUmakefile suitesparse-4.2patched/CAMD/Lib/GNUmakefile
--- CAMD/Lib/GNUmakefile	2012-05-27 01:26:47.000000000 +0200
+++ CAMD/Lib/GNUmakefile	2015-10-25 13:55:25.089043000 +0100
@@ -2,7 +2,10 @@
 # CAMD Makefile for compiling on Unix systems (for GNU make only)
 #-------------------------------------------------------------------------------
 
-default: libcamd.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_CAMD)
+
+default: libcamd.a libcamd.so.$(SOVERSION)
 
 include ../../SuiteSparse_config/SuiteSparse_config.mk
 
@@ -25,18 +28,27 @@
 CAMDI = $(addsuffix .o, $(subst camd_,camd_i_,$(CAMD)))
 CAMDL = $(addsuffix .o, $(subst camd_,camd_l_,$(CAMD)))
 
+CAMDI_SL = $(addsuffix .oo, $(subst camd_,camd_i_,$(CAMD)))
+CAMDL_SL = $(addsuffix .oo, $(subst camd_,camd_l_,$(CAMD)))
+
 #-------------------------------------------------------------------------------
 # compile each int and long routine (with no real/complex version)
 #-------------------------------------------------------------------------------
 
 camd_global.o: ../Source/camd_global.c $(INC)
 	$(C) -c $< -o $@
+camd_global.oo: ../Source/camd_global.c $(INC)
+	$(C) -fPIC -c $< -o $@
 
 camd_i_%.o: ../Source/camd_%.c $(INC)
 	$(C) -DDINT -c $< -o $@
+camd_i_%.oo: ../Source/camd_%.c $(INC)
+	$(C) -fPIC -DDINT -c $< -o $@
 
 camd_l_%.o: ../Source/camd_%.c $(INC)
 	$(C) -DDLONG -c $< -o $@
+camd_l_%.oo: ../Source/camd_%.c $(INC)
+	$(C) -fPIC -DDLONG -c $< -o $@
 
 #-------------------------------------------------------------------------------
 # Create the libcamd.a library (C versions only)
@@ -46,12 +58,19 @@
 	$(ARCHIVE)  libcamd.a $^
 	- $(RANLIB) libcamd.a
 
+libcamd.so.$(SOVERSION): camd_global.oo $(CAMDI_SL) $(CAMDL_SL)
+	$(CC) $(LDFLAGS) -shared $^ -lm -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libcamd.so
+
 #-------------------------------------------------------------------------------
 # Remove all but the files in the original distribution
 #-------------------------------------------------------------------------------
 
 clean:
 	- $(RM) $(CLEAN)
+	-$(RM) *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
 
 purge: distclean
 
diff -Naur CAMD/Makefile suitesparse-4.2patched/CAMD/Makefile
--- CAMD/Makefile	2012-06-19 21:04:08.000000000 +0200
+++ CAMD/Makefile	2015-10-25 15:04:08.551945087 +0100
@@ -50,6 +50,8 @@
 
 # install CAMD
 install:
+	$(CP) Lib/libcamd.so $(INSTALL_LIB)/libcamd.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libcamd.$(VERSION).so libcamd.so )
 	$(CP) Lib/libcamd.a $(INSTALL_LIB)/libcamd.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libcamd.$(VERSION).a libcamd.a )
 	$(CP) Include/camd.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/CCOLAMD/Lib/Makefile suitesparse-4.2patched/CCOLAMD/Lib/Makefile
--- CCOLAMD/Lib/Makefile	2012-05-27 01:28:56.000000000 +0200
+++ CCOLAMD/Lib/Makefile	2015-10-25 13:55:42.573042000 +0100
@@ -2,7 +2,10 @@
 # CCOLAMD Makefile
 #-------------------------------------------------------------------------------
 
-default: libccolamd.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_CCOLAMD)
+
+default: libccolamd.a libccolamd.so.$(SOVERSION)
 
 include ../../SuiteSparse_config/SuiteSparse_config.mk
 
@@ -20,12 +23,22 @@
 	$(ARCHIVE)  libccolamd.a ccolamd.o ccolamd_l.o ccolamd_global.o
 	- $(RANLIB) libccolamd.a 
 
+libccolamd.so.$(SOVERSION):  $(SRC) $(INC)
+	$(CC) -fPIC $(CF) $(I) -c ../Source/ccolamd_global.c -o ccolamd_global.oo
+	$(CC) -fPIC $(CF) $(I) -c ../Source/ccolamd.c -o ccolamd.oo
+	$(CC) -fPIC $(CF) $(I) -c ../Source/ccolamd.c -DDLONG -o ccolamd_l.oo
+	$(CC) $(LDFLAGS) -shared *.oo -lm -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libccolamd.so
+
 ccode: libccolamd.a
 
 library: libccolamd.a
 
 clean:
 	- $(RM) $(CLEAN)
+	-$(RM) *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
 
 purge: distclean
 
diff -Naur SuiteSparse/CCOLAMD/Makefile suitesparse-4.2patched/CCOLAMD/Makefile
--- CCOLAMD/Makefile	2012-05-28 21:58:29.000000000 +0200
+++ CCOLAMD/Makefile	2015-10-25 15:04:23.203944471 +0100
@@ -43,6 +43,8 @@
 
 # install CCOLAMD
 install:
+	$(CP) Lib/libccolamd.so $(INSTALL_LIB)/libccolamd.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libccolamd.$(VERSION).so libccolamd.so )
 	$(CP) Lib/libccolamd.a $(INSTALL_LIB)/libccolamd.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libccolamd.$(VERSION).a libccolamd.a )
 	$(CP) Include/ccolamd.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/CHOLMOD/Lib/Makefile suitesparse-4.2patched/CHOLMOD/Lib/Makefile
--- CHOLMOD/Lib/Makefile	2013-04-15 22:11:51.000000000 +0200
+++ CHOLMOD/Lib/Makefile	2015-10-25 13:56:10.201042000 +0100
@@ -50,7 +50,11 @@
 
 C = $(CC) $(CF) $(CHOLMOD_CONFIG) $(CONFIG)
 
-all: libcholmod.a
+
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_CHOLMOD)
+
+all: libcholmod.a libcholmod.so.$(SOVERSION)
 
 library: libcholmod.a
 
@@ -61,6 +65,9 @@
 
 clean:
 	- $(RM) $(CLEAN)
+	-$(RM) *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
 
 #-------------------------------------------------------------------------------
 # ../Include/ directory contains all include files:
@@ -90,28 +97,37 @@
 	cholmod_memory.o cholmod_sparse.o \
 	cholmod_transpose.o cholmod_triplet.o \
         cholmod_version.o
+CORE_SL = $(subst .o,.oo,$(CORE))
 
 CHECK = cholmod_check.o cholmod_read.o cholmod_write.o
+CHECK_SL = $(subst .o,.oo,$(CHECK))
 
 CHOLESKY = cholmod_amd.o cholmod_analyze.o cholmod_colamd.o \
 	cholmod_etree.o cholmod_factorize.o cholmod_postorder.o \
 	cholmod_rcond.o cholmod_resymbol.o cholmod_rowcolcounts.o \
 	cholmod_rowfac.o cholmod_solve.o cholmod_spsolve.o
+CHOLESKY_SL = $(subst .o,.oo,$(CHOLESKY))
 
 MATRIXOPS = cholmod_drop.o cholmod_horzcat.o cholmod_norm.o \
 	cholmod_scale.o cholmod_sdmult.o cholmod_ssmult.o \
 	cholmod_submatrix.o cholmod_vertcat.o cholmod_symmetry.o
+MATRIXOPS_SL = $(subst .o,.oo,$(MATRIXOPS))
 
 PARTITION = cholmod_ccolamd.o cholmod_csymamd.o \
 	cholmod_metis.o cholmod_nesdis.o cholmod_camd.o
+PARTITION_SL = $(subst .o,.oo,$(PARTITION))
 
 MODIFY = cholmod_rowadd.o cholmod_rowdel.o cholmod_updown.o
+MODIFY_SL = $(subst .o,.oo,$(MODIFY))
 
 SUPERNODAL = cholmod_super_numeric.o cholmod_super_solve.o \
 	cholmod_super_symbolic.o
+SUPERNODAL_SL = $(subst .o,.oo,$(SUPERNODAL))
 
 DI = $(CORE) $(CHECK) $(CHOLESKY) $(MATRIXOPS) $(MODIFY) $(SUPERNODAL) \
 	$(PARTITION)
+DI_SL = $(CORE_SL) $(CHECK_SL) $(CHOLESKY_SL) $(MATRIXOPS_SL) $(MODIFY_SL) \
+	$(SUPERNODAL_SL) $(PARTITION_SL)
 
 #-------------------------------------------------------------------------------
 # CHOLMOD library modules (long, double)
@@ -123,39 +139,53 @@
 	cholmod_l_factor.o cholmod_l_memory.o \
 	cholmod_l_sparse.o cholmod_l_transpose.o cholmod_l_triplet.o \
         cholmod_l_version.o
+LCORE_SL = $(subst .o,.oo,$(LCORE))
 
 LCHECK = cholmod_l_check.o cholmod_l_read.o cholmod_l_write.o
+LCHECK_SL = $(subst .o,.oo,$(LCHECK))
 
 LCHOLESKY = cholmod_l_amd.o cholmod_l_analyze.o cholmod_l_colamd.o \
 	cholmod_l_etree.o cholmod_l_factorize.o cholmod_l_postorder.o \
 	cholmod_l_rcond.o cholmod_l_resymbol.o cholmod_l_rowcolcounts.o \
 	cholmod_l_rowfac.o cholmod_l_solve.o cholmod_l_spsolve.o
+LCHOLESKY_SL = $(subst .o,.oo,$(LCHOLESKY))
 
 LMATRIXOPS = cholmod_l_drop.o cholmod_l_horzcat.o cholmod_l_norm.o \
 	cholmod_l_scale.o cholmod_l_sdmult.o cholmod_l_ssmult.o \
 	cholmod_l_submatrix.o cholmod_l_vertcat.o cholmod_l_symmetry.o
+LMATRIXOPS_SL = $(subst .o,.oo,$(LMATRIXOPS))
 
 LPARTITION = cholmod_l_ccolamd.o cholmod_l_csymamd.o \
 	cholmod_l_metis.o cholmod_l_nesdis.o cholmod_l_camd.o
+LPARTITION_SL = $(subst .o,.oo,$(LPARTITION))
 
 LMODIFY = cholmod_l_rowadd.o cholmod_l_rowdel.o cholmod_l_updown.o
+LMODIFY_SL = $(subst .o,.oo,$(LMODIFY))
 
 LSUPERNODAL = cholmod_l_super_numeric.o cholmod_l_super_solve.o \
 	cholmod_l_super_symbolic.o
+LSUPERNODAL_SL = $(subst .o,.oo,$(LSUPERNODAL))
 
 DL = $(LCORE) $(LCHECK) $(LCHOLESKY) $(LMATRIXOPS) $(LMODIFY) $(LSUPERNODAL) \
 	$(LPARTITION)
+DL_SL = $(LCORE_SL) $(LCHECK_SL) $(LCHOLESKY_SL) $(LMATRIXOPS_SL) \
+	$(LMODIFY_SL) $(LSUPERNODAL_SL) $(LPARTITION_SL)
 
 #-------------------------------------------------------------------------------
 
 # to compile just the double/int version, use OBJ = $(DI)
 OBJ = $(DI) $(DL)
+OBJ_SL = $(DI_SL) $(DL_SL)
 
 libcholmod.a: $(OBJ)
 	$(ARCHIVE)  libcholmod.a $(OBJ)
 	- $(RANLIB) libcholmod.a
 
-$(OBJ): $(INC)
+libcholmod.so.$(SOVERSION): $(OBJ_SL)
+	$(CC) $(LDFLAGS) -shared $^ -lblas -llapack ../../AMD/Lib/libamd.so ../../COLAMD/Lib/libcolamd.so ../../CAMD/Lib/libcamd.so ../../CCOLAMD/Lib/libccolamd.so -lm ../../SuiteSparse_config/libsuitesparseconfig_pic.a -lrt -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libcholmod.so
+
+$(OBJ) $(OBJ_SL): $(INC)
 
 #-------------------------------------------------------------------------------
 # Check Module:
@@ -163,23 +193,35 @@
 
 cholmod_check.o: ../Check/cholmod_check.c
 	$(C) -c $(I) $<
+cholmod_check.oo: ../Check/cholmod_check.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_read.o: ../Check/cholmod_read.c
 	$(C) -c $(I) $<
+cholmod_read.oo: ../Check/cholmod_read.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_write.o: ../Check/cholmod_write.c
 	$(C) -c $(I) $<
+cholmod_write.oo: ../Check/cholmod_write.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 cholmod_l_check.o: ../Check/cholmod_check.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_check.oo: ../Check/cholmod_check.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_read.o: ../Check/cholmod_read.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_read.oo: ../Check/cholmod_read.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_write.o: ../Check/cholmod_write.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_write.oo: ../Check/cholmod_write.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 
 #-------------------------------------------------------------------------------
@@ -188,97 +230,159 @@
 
 cholmod_common.o: ../Core/cholmod_common.c
 	$(C) -c $(I) $<
+cholmod_common.oo: ../Core/cholmod_common.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_dense.o: ../Core/cholmod_dense.c ../Core/t_cholmod_dense.c
 	$(C) -c $(I) $<
+cholmod_dense.oo: ../Core/cholmod_dense.c ../Core/t_cholmod_dense.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_factor.o: ../Core/cholmod_factor.c
 	$(C) -c $(I) $<
+cholmod_factor.oo: ../Core/cholmod_factor.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_change_factor.o: ../Core/cholmod_change_factor.c \
 	../Core/t_cholmod_change_factor.c
 	$(C) -c $(I) $<
+cholmod_change_factor.oo: ../Core/cholmod_change_factor.c \
+	../Core/t_cholmod_change_factor.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_memory.o: ../Core/cholmod_memory.c
 	$(C) -c $(I) $<
+cholmod_memory.oo: ../Core/cholmod_memory.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_sparse.o: ../Core/cholmod_sparse.c
 	$(C) -c $(I) $<
+cholmod_sparse.oo: ../Core/cholmod_sparse.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_complex.o: ../Core/cholmod_complex.c
 	$(C) -c $(I) $<
+cholmod_complex.oo: ../Core/cholmod_complex.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_transpose.o: ../Core/cholmod_transpose.c ../Core/t_cholmod_transpose.c
 	$(C) -c $(I) $<
+cholmod_transpose.oo: ../Core/cholmod_transpose.c ../Core/t_cholmod_transpose.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_band.o: ../Core/cholmod_band.c
 	$(C) -c $(I) $<
+cholmod_band.oo: ../Core/cholmod_band.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_copy.o: ../Core/cholmod_copy.c
 	$(C) -c $(I) $<
+cholmod_copy.oo: ../Core/cholmod_copy.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_triplet.o: ../Core/cholmod_triplet.c ../Core/t_cholmod_triplet.c
 	$(C) -c $(I) $<
+cholmod_triplet.oo: ../Core/cholmod_triplet.c ../Core/t_cholmod_triplet.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_error.o: ../Core/cholmod_error.c
 	$(C) -c $(I) $<
+cholmod_error.oo: ../Core/cholmod_error.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_aat.o: ../Core/cholmod_aat.c
 	$(C) -c $(I) $<
+cholmod_aat.oo: ../Core/cholmod_aat.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_add.o: ../Core/cholmod_add.c
 	$(C) -c $(I) $<
+cholmod_add.oo: ../Core/cholmod_add.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_version.o: ../Core/cholmod_version.c
 	$(C) -c $(I) $<
+cholmod_version.oo: ../Core/cholmod_version.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 cholmod_l_common.o: ../Core/cholmod_common.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_common.oo: ../Core/cholmod_common.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_dense.o: ../Core/cholmod_dense.c ../Core/t_cholmod_dense.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_dense.oo: ../Core/cholmod_dense.c ../Core/t_cholmod_dense.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_factor.o: ../Core/cholmod_factor.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_factor.oo: ../Core/cholmod_factor.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_change_factor.o: ../Core/cholmod_change_factor.c \
 	../Core/t_cholmod_change_factor.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_change_factor.oo: ../Core/cholmod_change_factor.c \
+	../Core/t_cholmod_change_factor.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_memory.o: ../Core/cholmod_memory.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_memory.oo: ../Core/cholmod_memory.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_sparse.o: ../Core/cholmod_sparse.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_sparse.oo: ../Core/cholmod_sparse.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_complex.o: ../Core/cholmod_complex.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_complex.oo: ../Core/cholmod_complex.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_transpose.o: ../Core/cholmod_transpose.c ../Core/t_cholmod_transpose.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_transpose.oo: ../Core/cholmod_transpose.c ../Core/t_cholmod_transpose.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_band.o: ../Core/cholmod_band.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_band.oo: ../Core/cholmod_band.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_copy.o: ../Core/cholmod_copy.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_copy.oo: ../Core/cholmod_copy.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_triplet.o: ../Core/cholmod_triplet.c ../Core/t_cholmod_triplet.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_triplet.oo: ../Core/cholmod_triplet.c ../Core/t_cholmod_triplet.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_error.o: ../Core/cholmod_error.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_error.oo: ../Core/cholmod_error.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_aat.o: ../Core/cholmod_aat.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_aat.oo: ../Core/cholmod_aat.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_add.o: ../Core/cholmod_add.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_add.oo: ../Core/cholmod_add.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_version.o: ../Core/cholmod_version.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_version.oo: ../Core/cholmod_version.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 
 #-------------------------------------------------------------------------------
@@ -287,79 +391,129 @@
 
 cholmod_amd.o: ../Cholesky/cholmod_amd.c
 	$(C) -c $(I) $<
+cholmod_amd.oo: ../Cholesky/cholmod_amd.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_analyze.o: ../Cholesky/cholmod_analyze.c
 	$(C) -c $(I) $<
+cholmod_analyze.oo: ../Cholesky/cholmod_analyze.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_colamd.o: ../Cholesky/cholmod_colamd.c
 	$(C) -c $(I) $<
+cholmod_colamd.oo: ../Cholesky/cholmod_colamd.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_etree.o: ../Cholesky/cholmod_etree.c
 	$(C) -c $(I) $<
+cholmod_etree.oo: ../Cholesky/cholmod_etree.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_factorize.o: ../Cholesky/cholmod_factorize.c
 	$(C) -c $(I) $<
+cholmod_factorize.oo: ../Cholesky/cholmod_factorize.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_postorder.o: ../Cholesky/cholmod_postorder.c
 	$(C) -c $(I) $<
+cholmod_postorder.oo: ../Cholesky/cholmod_postorder.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_rcond.o: ../Cholesky/cholmod_rcond.c
 	$(C) -c $(I) $<
+cholmod_rcond.oo: ../Cholesky/cholmod_rcond.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_resymbol.o: ../Cholesky/cholmod_resymbol.c
 	$(C) -c $(I) $<
+cholmod_resymbol.oo: ../Cholesky/cholmod_resymbol.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_rowcolcounts.o: ../Cholesky/cholmod_rowcolcounts.c
 	$(C) -c $(I) $<
+cholmod_rowcolcounts.oo: ../Cholesky/cholmod_rowcolcounts.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_solve.o: ../Cholesky/cholmod_solve.c ../Cholesky/t_cholmod_lsolve.c \
 	../Cholesky/t_cholmod_ltsolve.c ../Cholesky/t_cholmod_solve.c
 	$(C) -c $(I) $<
+cholmod_solve.oo: ../Cholesky/cholmod_solve.c ../Cholesky/t_cholmod_lsolve.c \
+	../Cholesky/t_cholmod_ltsolve.c ../Cholesky/t_cholmod_solve.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_spsolve.o: ../Cholesky/cholmod_spsolve.c
 	$(C) -c $(I) $<
+cholmod_spsolve.oo: ../Cholesky/cholmod_spsolve.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_rowfac.o: ../Cholesky/cholmod_rowfac.c ../Cholesky/t_cholmod_rowfac.c
 	$(C) -c $(I) $<
+cholmod_rowfac.oo: ../Cholesky/cholmod_rowfac.c ../Cholesky/t_cholmod_rowfac.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 cholmod_l_amd.o: ../Cholesky/cholmod_amd.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_amd.oo: ../Cholesky/cholmod_amd.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_analyze.o: ../Cholesky/cholmod_analyze.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_analyze.oo: ../Cholesky/cholmod_analyze.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_colamd.o: ../Cholesky/cholmod_colamd.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_colamd.oo: ../Cholesky/cholmod_colamd.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_etree.o: ../Cholesky/cholmod_etree.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_etree.oo: ../Cholesky/cholmod_etree.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_factorize.o: ../Cholesky/cholmod_factorize.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_factorize.oo: ../Cholesky/cholmod_factorize.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_postorder.o: ../Cholesky/cholmod_postorder.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_postorder.oo: ../Cholesky/cholmod_postorder.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_rcond.o: ../Cholesky/cholmod_rcond.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_rcond.oo: ../Cholesky/cholmod_rcond.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_resymbol.o: ../Cholesky/cholmod_resymbol.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_resymbol.oo: ../Cholesky/cholmod_resymbol.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_rowcolcounts.o: ../Cholesky/cholmod_rowcolcounts.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_rowcolcounts.oo: ../Cholesky/cholmod_rowcolcounts.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_solve.o: ../Cholesky/cholmod_solve.c ../Cholesky/t_cholmod_lsolve.c \
 	../Cholesky/t_cholmod_ltsolve.c ../Cholesky/t_cholmod_solve.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_solve.oo: ../Cholesky/cholmod_solve.c ../Cholesky/t_cholmod_lsolve.c \
+	../Cholesky/t_cholmod_ltsolve.c ../Cholesky/t_cholmod_solve.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_spsolve.o: ../Cholesky/cholmod_spsolve.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_spsolve.oo: ../Cholesky/cholmod_spsolve.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_rowfac.o: ../Cholesky/cholmod_rowfac.c ../Cholesky/t_cholmod_rowfac.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_rowfac.oo: ../Cholesky/cholmod_rowfac.c ../Cholesky/t_cholmod_rowfac.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 # Partition Module:
@@ -367,35 +521,55 @@
 
 cholmod_ccolamd.o: ../Partition/cholmod_ccolamd.c
 	$(C) -c $(I) $<
+cholmod_ccolamd.oo: ../Partition/cholmod_ccolamd.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_csymamd.o: ../Partition/cholmod_csymamd.c
 	$(C) -c $(I) $<
+cholmod_csymamd.oo: ../Partition/cholmod_csymamd.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_camd.o: ../Partition/cholmod_camd.c
 	$(C) -c $(I) $<
+cholmod_camd.oo: ../Partition/cholmod_camd.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_metis.o: ../Partition/cholmod_metis.c
 	$(C) -c $(I) $<
+cholmod_metis.oo: ../Partition/cholmod_metis.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_nesdis.o: ../Partition/cholmod_nesdis.c
 	$(C) -c $(I) $<
+cholmod_nesdis.oo: ../Partition/cholmod_nesdis.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 cholmod_l_ccolamd.o: ../Partition/cholmod_ccolamd.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_ccolamd.oo: ../Partition/cholmod_ccolamd.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_csymamd.o: ../Partition/cholmod_csymamd.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_csymamd.oo: ../Partition/cholmod_csymamd.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_camd.o: ../Partition/cholmod_camd.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_camd.oo: ../Partition/cholmod_camd.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_metis.o: ../Partition/cholmod_metis.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_metis.oo: ../Partition/cholmod_metis.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_nesdis.o: ../Partition/cholmod_nesdis.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_nesdis.oo: ../Partition/cholmod_nesdis.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 
 #-------------------------------------------------------------------------------
@@ -404,61 +578,99 @@
 
 cholmod_horzcat.o: ../MatrixOps/cholmod_horzcat.c
 	$(C) -c $(I) $<
+cholmod_horzcat.oo: ../MatrixOps/cholmod_horzcat.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_norm.o: ../MatrixOps/cholmod_norm.c
 	$(C) -c $(I) $<
+cholmod_norm.oo: ../MatrixOps/cholmod_norm.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_scale.o: ../MatrixOps/cholmod_scale.c
 	$(C) -c $(I) $<
+cholmod_scale.oo: ../MatrixOps/cholmod_scale.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_drop.o: ../MatrixOps/cholmod_drop.c
 	$(C) -c $(I) $<
+cholmod_drop.oo: ../MatrixOps/cholmod_drop.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_sdmult.o: ../MatrixOps/cholmod_sdmult.c \
 	../MatrixOps/t_cholmod_sdmult.c
 	$(C) -c $(I) $<
+cholmod_sdmult.oo: ../MatrixOps/cholmod_sdmult.c \
+	../MatrixOps/t_cholmod_sdmult.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_ssmult.o: ../MatrixOps/cholmod_ssmult.c
 	$(C) -c $(I) $<
+cholmod_ssmult.oo: ../MatrixOps/cholmod_ssmult.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_submatrix.o: ../MatrixOps/cholmod_submatrix.c
 	$(C) -c $(I) $<
+cholmod_submatrix.oo: ../MatrixOps/cholmod_submatrix.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_vertcat.o: ../MatrixOps/cholmod_vertcat.c
 	$(C) -c $(I) $<
+cholmod_vertcat.oo: ../MatrixOps/cholmod_vertcat.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_symmetry.o: ../MatrixOps/cholmod_symmetry.c
 	$(C) -c $(I) $<
+cholmod_symmetry.oo: ../MatrixOps/cholmod_symmetry.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 cholmod_l_horzcat.o: ../MatrixOps/cholmod_horzcat.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_horzcat.oo: ../MatrixOps/cholmod_horzcat.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_norm.o: ../MatrixOps/cholmod_norm.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_norm.oo: ../MatrixOps/cholmod_norm.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_scale.o: ../MatrixOps/cholmod_scale.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_scale.oo: ../MatrixOps/cholmod_scale.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_drop.o: ../MatrixOps/cholmod_drop.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_drop.oo: ../MatrixOps/cholmod_drop.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_sdmult.o: ../MatrixOps/cholmod_sdmult.c \
 	../MatrixOps/t_cholmod_sdmult.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_sdmult.oo: ../MatrixOps/cholmod_sdmult.c \
+	../MatrixOps/t_cholmod_sdmult.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_ssmult.o: ../MatrixOps/cholmod_ssmult.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_ssmult.oo: ../MatrixOps/cholmod_ssmult.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_submatrix.o: ../MatrixOps/cholmod_submatrix.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_submatrix.oo: ../MatrixOps/cholmod_submatrix.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_vertcat.o: ../MatrixOps/cholmod_vertcat.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_vertcat.oo: ../MatrixOps/cholmod_vertcat.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_symmetry.o: ../MatrixOps/cholmod_symmetry.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_symmetry.oo: ../MatrixOps/cholmod_symmetry.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 # Modify Module:
@@ -466,25 +678,39 @@
 
 cholmod_rowadd.o: ../Modify/cholmod_rowadd.c
 	$(C) -c $(I) $<
+cholmod_rowadd.oo: ../Modify/cholmod_rowadd.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_rowdel.o: ../Modify/cholmod_rowdel.c
 	$(C) -c $(I) $<
+cholmod_rowdel.oo: ../Modify/cholmod_rowdel.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_updown.o: ../Modify/cholmod_updown.c \
 	../Modify/t_cholmod_updown.c ../Modify/t_cholmod_updown_numkr.c
 	$(C) -c $(I) $<
+cholmod_updown.oo: ../Modify/cholmod_updown.c \
+	../Modify/t_cholmod_updown.c ../Modify/t_cholmod_updown_numkr.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 cholmod_l_rowadd.o: ../Modify/cholmod_rowadd.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_rowadd.oo: ../Modify/cholmod_rowadd.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_rowdel.o: ../Modify/cholmod_rowdel.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_rowdel.oo: ../Modify/cholmod_rowdel.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_updown.o: ../Modify/cholmod_updown.c \
 	../Modify/t_cholmod_updown.c ../Modify/t_cholmod_updown_numkr.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_updown.oo: ../Modify/cholmod_updown.c \
+	../Modify/t_cholmod_updown.c ../Modify/t_cholmod_updown_numkr.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 
 #-------------------------------------------------------------------------------
@@ -495,23 +721,40 @@
         ../Supernodal/t_cholmod_gpu.c \
 	../Supernodal/t_cholmod_super_numeric.c
 	$(C) -c $(I) $<
+cholmod_super_numeric.oo: ../Supernodal/cholmod_super_numeric.c \
+        ../Supernodal/t_cholmod_gpu.c \
+	../Supernodal/t_cholmod_super_numeric.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_super_symbolic.o: ../Supernodal/cholmod_super_symbolic.c
 	$(C) -c $(I) $<
+cholmod_super_symbolic.oo: ../Supernodal/cholmod_super_symbolic.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 cholmod_super_solve.o: ../Supernodal/cholmod_super_solve.c \
 	../Supernodal/t_cholmod_super_solve.c
 	$(C) -c $(I) $<
+cholmod_super_solve.oo: ../Supernodal/cholmod_super_solve.c \
+	../Supernodal/t_cholmod_super_solve.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 cholmod_l_super_numeric.o: ../Supernodal/cholmod_super_numeric.c \
 	../Supernodal/t_cholmod_super_numeric.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_super_numeric.oo: ../Supernodal/cholmod_super_numeric.c \
+	../Supernodal/t_cholmod_super_numeric.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_super_symbolic.o: ../Supernodal/cholmod_super_symbolic.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_super_symbolic.oo: ../Supernodal/cholmod_super_symbolic.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
 
 cholmod_l_super_solve.o: ../Supernodal/cholmod_super_solve.c \
 	../Supernodal/t_cholmod_super_solve.c
 	$(C) -DDLONG -c $(I) $< -o $@
+cholmod_l_super_solve.oo: ../Supernodal/cholmod_super_solve.c \
+	../Supernodal/t_cholmod_super_solve.c
+	$(C) -fPIC -DDLONG -c $(I) $< -o $@
diff -Naur SuiteSparse/CHOLMOD/Makefile suitesparse-4.2patched/CHOLMOD/Makefile
--- CHOLMOD/Makefile	2013-04-25 23:29:17.000000000 +0200
+++ CHOLMOD/Makefile	2015-10-25 15:03:46.107946031 +0100
@@ -61,6 +61,8 @@
 
 # install CHOLMOD
 install:
+	$(CP) Lib/libcholmod.so $(INSTALL_LIB)/libcholmod.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libcholmod.$(VERSION).so libcholmod.so )
 	$(CP) Lib/libcholmod.a $(INSTALL_LIB)/libcholmod.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libcholmod.$(VERSION).a libcholmod.a )
 	$(CP) Include/cholmod*.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/COLAMD/Lib/Makefile suitesparse-4.2patched/COLAMD/Lib/Makefile
--- COLAMD/Lib/Makefile	2012-05-27 01:36:30.000000000 +0200
+++ COLAMD/Lib/Makefile	2015-10-25 13:56:27.037042000 +0100
@@ -2,7 +2,10 @@
 # COLAMD Makefile
 #-------------------------------------------------------------------------------
 
-default: libcolamd.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_COLAMD)
+
+default: libcolamd.a libcolamd.so.$(SOVERSION)
 
 include ../../SuiteSparse_config/SuiteSparse_config.mk
 
@@ -20,12 +23,22 @@
 	$(ARCHIVE)  libcolamd.a colamd.o colamd_l.o colamd_global.o
 	- $(RANLIB) libcolamd.a
 
+libcolamd.so.$(SOVERSION):  $(SRC) $(INC)
+	$(CC) -fPIC $(CF) $(I) -c ../Source/colamd_global.c -o colamd_global.oo
+	$(CC) -fPIC $(CF) $(I) -c ../Source/colamd.c -o colamd.oo
+	$(CC) -fPIC $(CF) $(I) -c ../Source/colamd.c -DDLONG -o colamd_l.oo
+	$(CC) $(LDFLAGS) -shared *.oo -lm -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libcolamd.so
+
 ccode: libcolamd.a
 
 library: libcolamd.a
 
 clean:
 	- $(RM) $(CLEAN)
+	-$(RM) *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
 
 purge: distclean
 
diff -Naur SuiteSparse/COLAMD/Makefile suitesparse-4.2patched/COLAMD/Makefile
--- COLAMD/Makefile	2012-05-28 22:02:00.000000000 +0200
+++ COLAMD/Makefile	2015-10-25 15:00:55.835953192 +0100
@@ -43,6 +43,8 @@
 
 # install COLAMD
 install:
+	$(CP) Lib/libcolamd.so $(INSTALL_LIB)/libcolamd.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libcolamd.$(VERSION).so libcolamd.so )
 	$(CP) Lib/libcolamd.a $(INSTALL_LIB)/libcolamd.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libcolamd.$(VERSION).a libcolamd.a )
 	$(CP) Include/colamd.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/CSparse/Demo/Makefile suitesparse-4.2patched/CSparse/Demo/Makefile
--- CSparse/Demo/Makefile	2011-12-08 17:34:20.000000000 +0100
+++ CSparse/Demo/Makefile	2015-10-25 11:32:45.000000000 +0100
@@ -1,4 +1,4 @@
-CF = $(CFLAGS) $(CPPFLAGS) $(TARGET_ARCH) -O
+CF = $(CFLAGS) $(CPPFLAGS) $(TARGET_ARCH)
 I = -I../Include
 
 CS = ../Lib/libcsparse.a
diff -Naur SuiteSparse/CSparse/Lib/Makefile suitesparse-4.2patched/CSparse/Lib/Makefile
--- CSparse/Lib/Makefile	2011-12-08 18:39:23.000000000 +0100
+++ CSparse/Lib/Makefile	2015-10-25 13:56:50.933041000 +0100
@@ -1,9 +1,15 @@
-CF = $(CFLAGS) $(CPPFLAGS) $(TARGET_ARCH) -O
+CF = $(CFLAGS) $(CPPFLAGS) $(TARGET_ARCH)
 I = -I../Include
 RANLIB = ranlib
 ARCHIVE = $(AR) $(ARFLAGS)
 
-all: libcsparse.a
+C = $(CC) $(CF) -I../Include
+
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_CSparse)
+
+
+all: libcsparse.a libcsparse.so.$(SOVERSION)
 
 CS = cs_add.o cs_amd.o cs_chol.o cs_cholsol.o cs_counts.o cs_cumsum.o \
 	cs_droptol.o cs_dropzeros.o cs_dupl.o cs_entry.o \
@@ -14,18 +20,29 @@
 	cs_transpose.o cs_compress.o cs_usolve.o cs_utsolve.o cs_scc.o \
 	cs_maxtrans.o cs_dmperm.o cs_updown.o cs_print.o cs_norm.o cs_load.o \
 	cs_dfs.o cs_reach.o cs_spsolve.o cs_ereach.o cs_leaf.o cs_randperm.o
+CS_SL = $(subst .o,.oo,$(CS))
 
 $(CS): ../Include/cs.h Makefile
+$(CS_SL): ../Include/cs.h Makefile
 
 %.o: ../Source/%.c ../Include/cs.h
-	$(CC) $(CF) $(I) -c $<
+	$(C) -c $<
+%.oo: ../Source/%.c ../Include/cs.h
+	$(C) -fPIC -c $< -o $@
 
 libcsparse.a: $(CS)
 	$(ARCHIVE)  libcsparse.a $(CS)
 	- $(RANLIB) libcsparse.a
 
+libcsparse.so.$(SOVERSION): $(CS_SL)
+	$(CC) $(LDFLAGS) -shared $^ -lm -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libcsparse.so
+
+
 clean:
-	- $(RM) *.o
+	- $(RM) *.o *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
 
 purge: distclean
 
diff -Naur SuiteSparse/CXSparse/Lib/Makefile suitesparse-4.2patched/CXSparse/Lib/Makefile
--- CXSparse/Lib/Makefile	2012-05-27 01:39:11.000000000 +0200
+++ CXSparse/Lib/Makefile	2015-10-25 13:57:05.505041000 +0100
@@ -7,7 +7,11 @@
 
 I = -I../../SuiteSparse_config -I../Include
 
-all: libcxsparse.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_CXSparse)
+
+
+all: libcxsparse.a libcxsparse.so.$(SOVERSION)
 
 CS_SOURCE = cs_add.c cs_amd.c cs_chol.c cs_cholsol.c cs_counts.c cs_cumsum.c \
 	cs_droptol.c cs_dropzeros.c cs_dupl.c cs_entry.c \
@@ -30,6 +34,7 @@
 	cs_scc_di.o cs_maxtrans_di.o cs_dmperm_di.o cs_updown_di.o cs_print_di.o \
 	cs_norm_di.o cs_load_di.o cs_dfs_di.o cs_reach_di.o cs_spsolve_di.o \
 	cs_leaf_di.o cs_ereach_di.o cs_randperm_di.o
+CS_DI_OBJ_SL = $(subst .o,.oo,$(CS_DI_OBJ))
 
 CS_DL_OBJ =  cs_add_dl.o cs_amd_dl.o cs_chol_dl.o cs_cholsol_dl.o cs_counts_dl.o \
 	cs_cumsum_dl.o cs_droptol_dl.o cs_dropzeros_dl.o cs_dupl_dl.o \
@@ -42,6 +47,7 @@
 	cs_scc_dl.o cs_maxtrans_dl.o cs_dmperm_dl.o cs_updown_dl.o cs_print_dl.o \
 	cs_norm_dl.o cs_load_dl.o cs_dfs_dl.o cs_reach_dl.o cs_spsolve_dl.o \
 	cs_leaf_dl.o cs_ereach_dl.o cs_randperm_dl.o
+CS_DL_OBJ_SL = $(subst .o,.oo,$(CS_DL_OBJ))
 
 CS_CI_OBJ =  cs_add_ci.o cs_amd_ci.o cs_chol_ci.o cs_cholsol_ci.o cs_counts_ci.o \
 	cs_cumsum_ci.o cs_droptol_ci.o cs_dropzeros_ci.o cs_dupl_ci.o \
@@ -54,6 +60,7 @@
 	cs_scc_ci.o cs_maxtrans_ci.o cs_dmperm_ci.o cs_updown_ci.o cs_print_ci.o \
 	cs_norm_ci.o cs_load_ci.o cs_dfs_ci.o cs_reach_ci.o cs_spsolve_ci.o \
 	cs_leaf_ci.o cs_ereach_ci.o cs_randperm_ci.o
+CS_CI_OBJ_SL = $(subst .o,.oo,$(CS_CI_OBJ))
 
 CS_CL_OBJ =  cs_add_cl.o cs_amd_cl.o cs_chol_cl.o cs_cholsol_cl.o cs_counts_cl.o \
 	cs_cumsum_cl.o cs_droptol_cl.o cs_dropzeros_cl.o cs_dupl_cl.o \
@@ -66,32 +73,51 @@
 	cs_scc_cl.o cs_maxtrans_cl.o cs_dmperm_cl.o cs_updown_cl.o cs_print_cl.o \
 	cs_norm_cl.o cs_load_cl.o cs_dfs_cl.o cs_reach_cl.o cs_spsolve_cl.o \
 	cs_leaf_cl.o cs_ereach_cl.o cs_randperm_cl.o
+CS_CL_OBJ_SL = $(subst .o,.oo,$(CS_CL_OBJ))
 
 CS = cs_convert.o $(CS_DI_OBJ) $(CS_DL_OBJ) $(CS_CI_OBJ) $(CS_CL_OBJ)
+CS_SL = cs_convert.oo $(CS_DI_OBJ_SL) $(CS_DL_OBJ_SL) $(CS_CI_OBJ_SL) $(CS_CL_OBJ_SL)
 
 $(CS): ../Include/cs.h Makefile
 
 cs_convert.o: ../Source/cs_convert.c
 	$(CC) $(CF) $(I) -c $< -o $@
+cs_convert.oo: ../Source/cs_convert.c
+	$(CC) -fPIC $(CF) $(I) -c $< -o $@
 
 %_di.o : ../Source/%.c
 	$(CC) $(CF) $(I) -c $< -o $@
+%_di.oo : ../Source/%.c
+	$(CC) -fPIC $(CF) $(I) -c $< -o $@
 
 %_dl.o : ../Source/%.c
 	$(CC) $(CF) $(I) -DCS_LONG -c $< -o $@
+%_dl.oo : ../Source/%.c
+	$(CC) -fPIC $(CF) $(I) -DCS_LONG -c $< -o $@
 
 %_ci.o : ../Source/%.c
 	$(CC) $(CF) $(I) -DCS_COMPLEX -c $< -o $@
+%_ci.oo : ../Source/%.c
+	$(CC) -fPIC $(CF) $(I) -DCS_COMPLEX -c $< -o $@
 
 %_cl.o : ../Source/%.c
 	$(CC) $(CF) $(I) -DCS_LONG -DCS_COMPLEX -c $< -o $@
+%_cl.oo : ../Source/%.c
+	$(CC) -fPIC $(CF) $(I) -DCS_LONG -DCS_COMPLEX -c $< -o $@
 
 libcxsparse.a: $(CS)
 	$(ARCHIVE)  libcxsparse.a $(CS)
 	- $(RANLIB) libcxsparse.a
 
+libcxsparse.so.$(SOVERSION): $(CS_SL)
+	$(CC) $(LDFLAGS) -shared $^ -lm -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libcxsparse.so
+
+
 clean:
-	- $(RM) *.o
+	- $(RM) *.o *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
 
 purge: distclean
 
diff -Naur SuiteSparse/CXSparse/Makefile suitesparse-4.2patched/CXSparse/Makefile
--- CXSparse/Makefile	2013-04-15 21:33:15.000000000 +0200
+++ CXSparse/Makefile	2015-10-25 15:05:40.415941224 +0100
@@ -38,6 +38,8 @@
 
 # install CSparse
 install:
+	$(CP) Lib/libcxsparse.so $(INSTALL_LIB)/libcxsparse.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libcxsparse.$(VERSION).so libcxsparse.so )
 	$(CP) Lib/libcxsparse.a $(INSTALL_LIB)/libcxsparse.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libcxsparse.$(VERSION).a libcxsparse.a )
 	$(CP) Include/cs.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/CXSparse_newfiles/Makefile suitesparse-4.2patched/CXSparse_newfiles/Makefile
--- CXSparse_newfiles/Makefile	2013-04-15 21:33:15.000000000 +0200
+++ CXSparse_newfiles/Makefile	2015-10-25 15:00:39.375953884 +0100
@@ -38,6 +38,8 @@
 
 # install CSparse
 install:
+	$(CP) Lib/libcxsparse.so $(INSTALL_LIB)/libcxsparse.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libcxsparse.$(VERSION).so libcxsparse.so )
 	$(CP) Lib/libcxsparse.a $(INSTALL_LIB)/libcxsparse.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libcxsparse.$(VERSION).a libcxsparse.a )
 	$(CP) Include/cs.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/KLU/Demo/Makefile suitesparse-4.2patched/KLU/Demo/Makefile
--- KLU/Demo/Makefile	2012-05-28 15:30:41.000000000 +0200
+++ KLU/Demo/Makefile	2015-10-25 11:32:45.000000000 +0100
@@ -42,9 +42,9 @@
 	( cd ../../COLAMD ; $(MAKE) library )
 
 ../../CHOLMOD/Lib/libcholmod.a:
+	( cd ../../CAMD ; $(MAKE) library )
+	( cd ../../CCOLAMD ; $(MAKE) library )
 	( cd ../../CHOLMOD ; $(MAKE) library )
-#	( cd ../../CAMD ; $(MAKE) )
-#	( cd ../../CCOLAMD ; $(MAKE) )
 #	( cd ../../metis-4.0 ; $(MAKE) )
 
 ../../SuiteSparse_config/libsuitesparseconfig.a:
@@ -59,10 +59,10 @@
 clean:
 	- $(RM) $(CLEAN)
 
-kludemo: kludemo.c Makefile $(CLIB)
+kludemo: kludemo.c Makefile $(CLIB) $(CHOLMOD)
 	$(CC) $(CF) $(I) kludemo.c -o kludemo $(CLIB) $(CHOLMOD) $(LIB)
 
-kluldemo: kludemo.c Makefile $(CLIB)
+kluldemo: kludemo.c Makefile $(CLIB) $(CHOLMOD)
 	$(CC) $(CF) $(I) kluldemo.c -o kluldemo $(CLIB) $(CHOLMOD) $(LIB)
 
 klu_simple: klu_simple.c Makefile $(CLIB)
diff -Naur SuiteSparse/KLU/Lib/Makefile suitesparse-4.2patched/KLU/Lib/Makefile
--- KLU/Lib/Makefile	2012-05-27 01:41:38.000000000 +0200
+++ KLU/Lib/Makefile	2015-10-25 13:57:23.261041000 +0100
@@ -17,132 +17,203 @@
 
 all: library
 
-library: libklu.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_KLU)
+
+library: libklu.a libklu.so.$(SOVERSION)
 
 KLU_D = klu_d.o klu_d_kernel.o klu_d_dump.o \
     klu_d_factor.o klu_d_free_numeric.o klu_d_solve.o \
     klu_d_scale.o klu_d_refactor.o \
     klu_d_tsolve.o klu_d_diagnostics.o klu_d_sort.o klu_d_extract.o
+KLU_D_SL = $(subst .o,.oo,$(KLU_D))
 
 KLU_Z = klu_z.o klu_z_kernel.o klu_z_dump.o \
     klu_z_factor.o klu_z_free_numeric.o klu_z_solve.o \
     klu_z_scale.o klu_z_refactor.o \
     klu_z_tsolve.o klu_z_diagnostics.o klu_z_sort.o klu_z_extract.o
+KLU_Z_SL = $(subst .o,.oo,$(KLU_Z))
 
 KLU_L = klu_l.o klu_l_kernel.o klu_l_dump.o \
     klu_l_factor.o klu_l_free_numeric.o klu_l_solve.o \
     klu_l_scale.o klu_l_refactor.o \
     klu_l_tsolve.o klu_l_diagnostics.o klu_l_sort.o klu_l_extract.o
+KLU_L_SL = $(subst .o,.oo,$(KLU_L))
 
 KLU_ZL = klu_zl.o klu_zl_kernel.o klu_zl_dump.o \
     klu_zl_factor.o klu_zl_free_numeric.o klu_zl_solve.o \
     klu_zl_scale.o klu_zl_refactor.o \
     klu_zl_tsolve.o klu_zl_diagnostics.o klu_zl_sort.o klu_zl_extract.o
+KLU_ZL_SL = $(subst .o,.oo,$(KLU_ZL))
 
 COMMON = \
     klu_free_symbolic.o klu_defaults.o klu_analyze_given.o \
     klu_analyze.o klu_memory.o \
     klu_l_free_symbolic.o klu_l_defaults.o klu_l_analyze_given.o \
     klu_l_analyze.o klu_l_memory.o
+COMMON_SL = $(subst .o,.oo,$(COMMON))
 
 OBJ = $(COMMON) $(KLU_D) $(KLU_Z) $(KLU_L) $(KLU_ZL)
+OBJ_SL = $(COMMON_SL) $(KLU_D_SL) $(KLU_Z_SL) $(KLU_L_SL) $(KLU_ZL_SL)
 
 libklu.a: $(OBJ)
 	$(ARCHIVE)  libklu.a $(OBJ)
 	- $(RANLIB) libklu.a
 
-$(OBJ): $(INC)
+libklu.so.$(SOVERSION): $(OBJ_SL)
+	$(CC) $(LDFLAGS) -shared $^ -lm ../../AMD/Lib/libamd.so ../../BTF/Lib/libbtf.so ../../COLAMD/Lib/libcolamd.so -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libklu.so
+
+$(OBJ) $(OBJ_SL): $(INC)
 
 #-------------------------------------------------------------------------------
 
 klu_d.o: ../Source/klu.c
 	$(C) -c $(I) $< -o $@
+klu_d.oo: ../Source/klu.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z.o: ../Source/klu.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z.oo: ../Source/klu.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_kernel.o: ../Source/klu_kernel.c
 	$(C) -c $(I) $< -o $@
+klu_d_kernel.oo: ../Source/klu_kernel.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_kernel.o: ../Source/klu_kernel.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_kernel.oo: ../Source/klu_kernel.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_sort.o: ../Source/klu_sort.c
 	$(C) -c $(I) $< -o $@
+klu_d_sort.oo: ../Source/klu_sort.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_sort.o: ../Source/klu_sort.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_sort.oo: ../Source/klu_sort.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_diagnostics.o: ../Source/klu_diagnostics.c
 	$(C) -c $(I) $< -o $@
+klu_d_diagnostics.oo: ../Source/klu_diagnostics.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_diagnostics.o: ../Source/klu_diagnostics.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_diagnostics.oo: ../Source/klu_diagnostics.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_dump.o: ../Source/klu_dump.c
 	$(C) -c $(I) $< -o $@
+klu_d_dump.oo: ../Source/klu_dump.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_dump.o: ../Source/klu_dump.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_dump.oo: ../Source/klu_dump.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_factor.o: ../Source/klu_factor.c
 	$(C) -c $(I) $< -o $@
+klu_d_factor.oo: ../Source/klu_factor.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_factor.o: ../Source/klu_factor.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_factor.oo: ../Source/klu_factor.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_free_numeric.o: ../Source/klu_free_numeric.c
 	$(C) -c $(I) $< -o $@
+klu_d_free_numeric.oo: ../Source/klu_free_numeric.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_free_numeric.o: ../Source/klu_free_numeric.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_free_numeric.oo: ../Source/klu_free_numeric.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_extract.o: ../Source/klu_extract.c
 	$(C) -c $(I) $< -o $@
+klu_d_extract.oo: ../Source/klu_extract.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_extract.o: ../Source/klu_extract.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_extract.oo: ../Source/klu_extract.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_refactor.o: ../Source/klu_refactor.c
 	$(C) -c $(I) $< -o $@
+klu_d_refactor.oo: ../Source/klu_refactor.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_refactor.o: ../Source/klu_refactor.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_refactor.oo: ../Source/klu_refactor.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_scale.o: ../Source/klu_scale.c
 	$(C) -c $(I) $< -o $@
+klu_d_scale.oo: ../Source/klu_scale.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_scale.o: ../Source/klu_scale.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_scale.oo: ../Source/klu_scale.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_solve.o: ../Source/klu_solve.c
 	$(C) -c $(I) $< -o $@
+klu_d_solve.oo: ../Source/klu_solve.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_solve.o: ../Source/klu_solve.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_solve.oo: ../Source/klu_solve.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 klu_d_tsolve.o: ../Source/klu_tsolve.c
 	$(C) -c $(I) $< -o $@
+klu_d_tsolve.oo: ../Source/klu_tsolve.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_z_tsolve.o: ../Source/klu_tsolve.c
 	$(C) -c -DCOMPLEX $(I) $< -o $@
+klu_z_tsolve.oo: ../Source/klu_tsolve.c
+	$(C) -fPIC -c -DCOMPLEX $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 klu_analyze.o: ../Source/klu_analyze.c
 	$(C) -c $(I) $< -o $@
+klu_analyze.oo: ../Source/klu_analyze.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_analyze_given.o: ../Source/klu_analyze_given.c
 	$(C) -c $(I) $< -o $@
+klu_analyze_given.oo: ../Source/klu_analyze_given.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_defaults.o: ../Source/klu_defaults.c
 	$(C) -c $(I) $< -o $@
+klu_defaults.oo: ../Source/klu_defaults.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_free_symbolic.o: ../Source/klu_free_symbolic.c
 	$(C) -c $(I) $< -o $@
+klu_free_symbolic.oo: ../Source/klu_free_symbolic.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 klu_memory.o: ../Source/klu_memory.c
 	$(C) -c $(I) $< -o $@
+klu_memory.oo: ../Source/klu_memory.c
+	$(C) -fPIC -c $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
@@ -158,91 +229,149 @@
 
 klu_l.o: ../Source/klu.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l.oo: ../Source/klu.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl.o: ../Source/klu.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl.oo: ../Source/klu.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_kernel.o: ../Source/klu_kernel.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_kernel.oo: ../Source/klu_kernel.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_kernel.o: ../Source/klu_kernel.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_kernel.oo: ../Source/klu_kernel.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_sort.o: ../Source/klu_sort.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_sort.oo: ../Source/klu_sort.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_sort.o: ../Source/klu_sort.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_sort.oo: ../Source/klu_sort.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_diagnostics.o: ../Source/klu_diagnostics.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_diagnostics.oo: ../Source/klu_diagnostics.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_diagnostics.o: ../Source/klu_diagnostics.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_diagnostics.oo: ../Source/klu_diagnostics.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_dump.o: ../Source/klu_dump.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_dump.oo: ../Source/klu_dump.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_dump.o: ../Source/klu_dump.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_dump.oo: ../Source/klu_dump.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_factor.o: ../Source/klu_factor.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_factor.oo: ../Source/klu_factor.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_factor.o: ../Source/klu_factor.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_factor.oo: ../Source/klu_factor.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_free_numeric.o: ../Source/klu_free_numeric.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_free_numeric.oo: ../Source/klu_free_numeric.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_free_numeric.o: ../Source/klu_free_numeric.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_free_numeric.oo: ../Source/klu_free_numeric.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_extract.o: ../Source/klu_extract.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_extract.oo: ../Source/klu_extract.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_extract.o: ../Source/klu_extract.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_extract.oo: ../Source/klu_extract.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_refactor.o: ../Source/klu_refactor.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_refactor.oo: ../Source/klu_refactor.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_refactor.o: ../Source/klu_refactor.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_refactor.oo: ../Source/klu_refactor.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_scale.o: ../Source/klu_scale.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_scale.oo: ../Source/klu_scale.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_scale.o: ../Source/klu_scale.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_scale.oo: ../Source/klu_scale.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_solve.o: ../Source/klu_solve.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_solve.oo: ../Source/klu_solve.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_solve.o: ../Source/klu_solve.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_solve.oo: ../Source/klu_solve.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 klu_l_tsolve.o: ../Source/klu_tsolve.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_tsolve.oo: ../Source/klu_tsolve.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_zl_tsolve.o: ../Source/klu_tsolve.c
 	$(C) -c -DCOMPLEX -DDLONG $(I) $< -o $@
+klu_zl_tsolve.oo: ../Source/klu_tsolve.c
+	$(C) -fPIC -c -DCOMPLEX -DDLONG $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
 
 klu_l_analyze.o: ../Source/klu_analyze.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_analyze.oo: ../Source/klu_analyze.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_l_analyze_given.o: ../Source/klu_analyze_given.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_analyze_given.oo: ../Source/klu_analyze_given.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_l_defaults.o: ../Source/klu_defaults.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_defaults.oo: ../Source/klu_defaults.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_l_free_symbolic.o: ../Source/klu_free_symbolic.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_free_symbolic.oo: ../Source/klu_free_symbolic.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 klu_l_memory.o: ../Source/klu_memory.c
 	$(C) -c -DDLONG $(I) $< -o $@
+klu_l_memory.oo: ../Source/klu_memory.c
+	$(C) -fPIC -c -DDLONG $(I) $< -o $@
 
 #-------------------------------------------------------------------------------
diff -Naur SuiteSparse/KLU/Makefile suitesparse-4.2patched/KLU/Makefile
--- KLU/Makefile	2012-06-19 21:08:07.000000000 +0200
+++ KLU/Makefile	2015-10-25 15:01:45.951951084 +0100
@@ -41,6 +41,8 @@
 
 # install KLU
 install:
+	$(CP) Lib/libklu.so $(INSTALL_LIB)/libklu.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libklu.$(VERSION).so libklu.so )
 	$(CP) Lib/libklu.a $(INSTALL_LIB)/libklu.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libklu.$(VERSION).a libklu.a )
 	$(CP) Include/klu.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/LDL/Lib/Makefile suitesparse-4.2patched/LDL/Lib/Makefile
--- LDL/Lib/Makefile	2012-05-27 01:43:48.000000000 +0200
+++ LDL/Lib/Makefile	2015-10-25 13:57:32.025040000 +0100
@@ -10,7 +10,10 @@
 
 C = $(CC) $(CF) $(I)
 
-all: libldl.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_LDL)
+
+all: libldl.a libldl.so.$(SOVERSION)
 
 #-------------------------------------------------------------------------------
 # the ldl library:
@@ -22,6 +25,12 @@
 	$(ARCHIVE)  libldl.a ldl.o ldll.o
 	- $(RANLIB) libldl.a
 
+libldl.so.$(SOVERSION): ../Source/ldl.c ../Include/ldl.h
+	$(C) -fPIC -c ../Source/ldl.c -o ldl.oo
+	$(C) -fPIC -DLDL_LONG -c ../Source/ldl.c -o ldll.oo
+	$(C) $(LDFLAGS) -shared *.oo -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libldl.so
+
 distclean: purge
 
 purge: clean
@@ -29,4 +38,6 @@
 
 clean:
 	- $(RM) $(CLEAN)
-
+	-$(RM) *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
diff -Naur SuiteSparse/LDL/Makefile suitesparse-4.2patched/LDL/Makefile
--- LDL/Makefile	2012-05-28 22:17:48.000000000 +0200
+++ LDL/Makefile	2015-10-25 15:01:21.667952105 +0100
@@ -50,6 +50,8 @@
 
 # install LDL
 install:
+	$(CP) Lib/libldl.so $(INSTALL_LIB)/libldl.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libldl.$(VERSION).so libldl.so )
 	$(CP) Lib/libldl.a $(INSTALL_LIB)/libldl.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libldl.$(VERSION).a libldl.a )
 	$(CP) Include/ldl.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/Makefile_SONAMES.inc suitesparse-4.2patched/Makefile_SONAMES.inc
--- Makefile_SONAMES.inc	1970-01-01 01:00:00.000000000 +0100
+++ Makefile_SONAMES.inc	2015-10-25 13:52:55.729045000 +0100
@@ -0,0 +1,12 @@
+SONAME_AMD = = = "2.3.1"
+SONAME_CAMD = "2.3.1"
+SONAME_BTF = "1.2.0"
+SONAME_COLAMD = "2.8.0"
+SONAME_CCOLAMD = "2.8.0"
+SONAME_CHOLMOD = "2.1.2"
+SONAME_CSparse = "3.1.2"
+SONAME_CXSparse = "3.1.2"
+SONAME_KLU = "1.2.1"
+SONAME_LDL = "2.1.0"
+SONAME_UMFPACK = "5.6.2"
+SONAME_SPQR = "1.3.1"
diff -Naur SuiteSparse/RBio/Makefile suitesparse-4.2patched/RBio/Makefile
--- RBio/Makefile	2012-06-19 21:09:27.000000000 +0200
+++ RBio/Makefile	2015-10-25 15:03:29.839946715 +0100
@@ -51,6 +51,8 @@
 
 # install RBio
 install:
+	$(CP) Lib/librbio.so $(INSTALL_LIB)/librbio.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf librbio.$(VERSION).so librbio.so )
 	$(CP) Lib/librbio.a $(INSTALL_LIB)/librbio.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf librbio.$(VERSION).a librbio.a )
 	$(CP) Include/RBio.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/SPQR/Lib/Makefile suitesparse-4.2patched/SPQR/Lib/Makefile
--- SPQR/Lib/Makefile	2012-06-21 07:37:08.000000000 +0200
+++ SPQR/Lib/Makefile	2015-10-25 13:57:42.029040000 +0100
@@ -37,7 +37,10 @@
 # 	-Wredundant-decls -Wdisabled-optimization \
 # 	-ansi -fexceptions
 
-all: libspqr.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_SPQR)
+
+all: libspqr.a libspqr.so.$(SOVERSION)
 
 library: libspqr.a
 
@@ -48,6 +51,9 @@
 
 clean:
 	- $(RM) $(CLEAN)
+	-$(RM) *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
 
 INC = ../Include/spqr.hpp ../Include/SuiteSparseQR_C.h \
 	../Include/SuiteSparseQR_definitions.h \
@@ -95,7 +101,9 @@
     spqr_type.o \
     spqr_tol.o
 
-$(OBJ): $(INC)
+OBJ_SL = $(subst .o,.oo,$(OBJ))
+
+$(OBJ) $(OBJ_SL): $(INC)
 
 I = -I../../CHOLMOD/Include -I../../SuiteSparse_config -I../Include
 
@@ -105,122 +113,206 @@
 	$(ARCHIVE)  libspqr.a $(OBJ)
 	- $(RANLIB) libspqr.a
 
+libspqr.so.$(SOVERSION): $(OBJ_SL)
+	$(CC) $(LDFLAGS) -shared $^ -lm -lblas -llapack ../../CHOLMOD/Lib/libcholmod.so ../../SuiteSparse_config/libsuitesparseconfig.a -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libspqr.so
+
 spqr_1colamd.o: ../Source/spqr_1colamd.cpp
 	$(C) -c $<
+spqr_1colamd.oo: ../Source/spqr_1colamd.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_1factor.o: ../Source/spqr_1factor.cpp
 	$(C) -c $<
+spqr_1factor.oo: ../Source/spqr_1factor.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_1fixed.o: ../Source/spqr_1fixed.cpp
 	$(C) -c $<
+spqr_1fixed.oo: ../Source/spqr_1fixed.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_analyze.o: ../Source/spqr_analyze.cpp
 	$(C) -c $<
+spqr_analyze.oo: ../Source/spqr_analyze.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_parallel.o: ../Source/spqr_parallel.cpp
 	$(C) -c $<
+spqr_parallel.oo: ../Source/spqr_parallel.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_kernel.o: ../Source/spqr_kernel.cpp
 	$(C) -c $<
+spqr_kernel.oo: ../Source/spqr_kernel.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_append.o: ../Source/spqr_append.cpp
 	$(C) -c $<
+spqr_append.oo: ../Source/spqr_append.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_assemble.o: ../Source/spqr_assemble.cpp
 	$(C) -c $<
+spqr_assemble.oo: ../Source/spqr_assemble.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_cpack.o: ../Source/spqr_cpack.cpp
 	$(C) -c $<
+spqr_cpack.oo: ../Source/spqr_cpack.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_csize.o: ../Source/spqr_csize.cpp
 	$(C) -c $<
+spqr_csize.oo: ../Source/spqr_csize.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_cumsum.o: ../Source/spqr_cumsum.cpp
 	$(C) -c $<
+spqr_cumsum.oo: ../Source/spqr_cumsum.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_debug.o: ../Source/spqr_debug.cpp
 	$(C) -c $<
+spqr_debug.oo: ../Source/spqr_debug.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_factorize.o: ../Source/spqr_factorize.cpp
 	$(C) -c $<
+spqr_factorize.oo: ../Source/spqr_factorize.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_fcsize.o: ../Source/spqr_fcsize.cpp
 	$(C) -c $<
+spqr_fcsize.oo: ../Source/spqr_fcsize.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_freefac.o: ../Source/spqr_freefac.cpp
 	$(C) -c $<
+spqr_freefac.oo: ../Source/spqr_freefac.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_freenum.o: ../Source/spqr_freenum.cpp
 	$(C) -c $<
+spqr_freenum.oo: ../Source/spqr_freenum.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_freesym.o: ../Source/spqr_freesym.cpp
 	$(C) -c $<
+spqr_freesym.oo: ../Source/spqr_freesym.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_fsize.o: ../Source/spqr_fsize.cpp
 	$(C) -c $<
+spqr_fsize.oo: ../Source/spqr_fsize.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_happly.o: ../Source/spqr_happly.cpp
 	$(C) -c $<
+spqr_happly.oo: ../Source/spqr_happly.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_panel.o: ../Source/spqr_panel.cpp
 	$(C) -c $<
+spqr_panel.oo: ../Source/spqr_panel.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_happly_work.o: ../Source/spqr_happly_work.cpp
 	$(C) -c $<
+spqr_happly_work.oo: ../Source/spqr_happly_work.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_hpinv.o: ../Source/spqr_hpinv.cpp
 	$(C) -c $<
+spqr_hpinv.oo: ../Source/spqr_hpinv.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_larftb.o: ../Source/spqr_larftb.cpp
 	$(C) -c $<
+spqr_larftb.oo: ../Source/spqr_larftb.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_rconvert.o: ../Source/spqr_rconvert.cpp
 	$(C) -c $<
+spqr_rconvert.oo: ../Source/spqr_rconvert.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_rcount.o: ../Source/spqr_rcount.cpp
 	$(C) -c $<
+spqr_rcount.oo: ../Source/spqr_rcount.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_rhpack.o: ../Source/spqr_rhpack.cpp
 	$(C) -c $<
+spqr_rhpack.oo: ../Source/spqr_rhpack.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_rsolve.o: ../Source/spqr_rsolve.cpp
 	$(C) -c $<
+spqr_rsolve.oo: ../Source/spqr_rsolve.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_shift.o: ../Source/spqr_shift.cpp
 	$(C) -c $<
+spqr_shift.oo: ../Source/spqr_shift.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_stranspose1.o: ../Source/spqr_stranspose1.cpp
 	$(C) -c $<
+spqr_stranspose1.oo: ../Source/spqr_stranspose1.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_stranspose2.o: ../Source/spqr_stranspose2.cpp
 	$(C) -c $<
+spqr_stranspose2.oo: ../Source/spqr_stranspose2.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_trapezoidal.o: ../Source/spqr_trapezoidal.cpp
 	$(C) -c $<
+spqr_trapezoidal.oo: ../Source/spqr_trapezoidal.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_type.o: ../Source/spqr_type.cpp
 	$(C) -c $<
+spqr_type.oo: ../Source/spqr_type.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_front.o: ../Source/spqr_front.cpp
 	$(C) -c $<
+spqr_front.oo: ../Source/spqr_front.cpp
+	$(C) -fPIC -c $< -o $@
 
 SuiteSparseQR_expert.o: ../Source/SuiteSparseQR_expert.cpp
 	$(C) -c $<
+SuiteSparseQR_expert.oo: ../Source/SuiteSparseQR_expert.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_maxcolnorm.o: ../Source/spqr_maxcolnorm.cpp
 	$(C) -c $<
+spqr_maxcolnorm.oo: ../Source/spqr_maxcolnorm.cpp
+	$(C) -fPIC -c $< -o $@
 
 SuiteSparseQR_qmult.o: ../Source/SuiteSparseQR_qmult.cpp
 	$(C) -c $<
+SuiteSparseQR_qmult.oo: ../Source/SuiteSparseQR_qmult.cpp
+	$(C) -fPIC -c $< -o $@
 
 SuiteSparseQR.o: ../Source/SuiteSparseQR.cpp
 	$(C) -c $<
+SuiteSparseQR.oo: ../Source/SuiteSparseQR.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_tol.o: ../Source/spqr_tol.cpp
 	$(C) -c $<
+spqr_tol.oo: ../Source/spqr_tol.cpp
+	$(C) -fPIC -c $< -o $@
 
 SuiteSparseQR_C.o: ../Source/SuiteSparseQR_C.cpp
 	$(C) -c $<
+SuiteSparseQR_C.oo: ../Source/SuiteSparseQR_C.cpp
+	$(C) -fPIC -c $< -o $@
 
 spqr_rmap.o: ../Source/spqr_rmap.cpp
 	$(C) -c $<
+spqr_rmap.oo: ../Source/spqr_rmap.cpp
+	$(C) -fPIC -c $< -o $@
diff -Naur SuiteSparse/SPQR/Makefile suitesparse-4.2patched/SPQR/Makefile
--- SPQR/Makefile	2012-06-19 21:28:41.000000000 +0200
+++ SPQR/Makefile	2015-10-25 15:02:32.675949119 +0100
@@ -43,6 +43,8 @@
 
 # install SPQR
 install:
+	$(CP) Lib/libspqr.so $(INSTALL_LIB)/libspqr.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libspqr.$(VERSION).so libspqr.so )
 	$(CP) Lib/libspqr.a $(INSTALL_LIB)/libspqr.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libspqr.$(VERSION).a libspqr.a )
 	$(CP) Include/SuiteSparseQR.hpp $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/SuiteSparse_config/Makefile suitesparse-4.2patched/SuiteSparse_config/Makefile
--- SuiteSparse_config/Makefile	2013-04-25 23:27:55.000000000 +0200
+++ SuiteSparse_config/Makefile	2015-10-25 15:04:47.555943447 +0100
@@ -8,7 +8,7 @@
 
 include SuiteSparse_config.mk
 
-ccode: libsuitesparseconfig.a
+ccode: libsuitesparseconfig.a libsuitesparseconfig_pic.a
 
 all: libsuitesparseconfig.a
 
@@ -20,6 +20,12 @@
 	$(RANLIB) libsuitesparseconfig.a
 	- $(RM) SuiteSparse_config.o
 
+libsuitesparseconfig_pic.a: SuiteSparse_config.c SuiteSparse_config.h
+	$(CC) $(CF) -fPIC -o SuiteSparse_config.oo -c SuiteSparse_config.c
+	$(ARCHIVE) libsuitesparseconfig_pic.a SuiteSparse_config.oo
+	$(RANLIB) libsuitesparseconfig_pic.a
+	- $(RM) SuiteSparse_config.oo
+
 distclean: purge
 
 purge: clean
@@ -30,6 +36,8 @@
 
 # install SuiteSparse_config
 install:
+	$(CP) libsuitesparseconfig.so $(INSTALL_LIB)/libsuitesparseconfig.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libsuitesparseconfig.$(VERSION).so libsuitesparseconfig.so )
 	$(CP) libsuitesparseconfig.a $(INSTALL_LIB)/libsuitesparseconfig.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libsuitesparseconfig.$(VERSION).a libsuitesparseconfig.a )
 	$(CP) SuiteSparse_config.h $(INSTALL_INCLUDE)
diff -Naur SuiteSparse/SuiteSparse_config/SuiteSparse_config.mk suitesparse-4.2patched/SuiteSparse_config/SuiteSparse_config.mk
--- SuiteSparse_config/SuiteSparse_config.mk	2013-03-26 22:45:03.000000000 +0100
+++ SuiteSparse_config/SuiteSparse_config.mk	2015-10-25 14:13:43.849024833 +0100
@@ -60,7 +60,7 @@
 # C and C++ compiler flags.  The first three are standard for *.c and *.cpp
 # Add -DNTIMER if you do use any timing routines (otherwise -lrt is required).
 # CF = $(CFLAGS) $(CPPFLAGS) $(TARGET_ARCH) -O3 -fexceptions -fPIC -DNTIMER
-  CF = $(CFLAGS) $(CPPFLAGS) $(TARGET_ARCH) -O3 -fexceptions -fPIC
+  CF = $(CFLAGS) $(CPPFLAGS) $(TARGET_ARCH) -fexceptions
 
 # ranlib, and ar, for generating libraries.  If you don't need ranlib,
 # just change it to RANLAB = echo
@@ -73,7 +73,7 @@
 
 # Fortran compiler (not required for 'make' or 'make library')
 F77 = gfortran
-F77FLAGS = $(FFLAGS) -O
+F77FLAGS = $(FFLAGS)
 F77LIB =
 
 # C and Fortran libraries.  Remove -lrt if you don't have it.
@@ -82,8 +82,8 @@
 # LIB = -lm
 
 # For "make install"
-INSTALL_LIB = /usr/local/lib
-INSTALL_INCLUDE = /usr/local/include
+INSTALL_LIB ?= /usr/local/lib
+INSTALL_INCLUDE ?= /usr/local/include
 
 # Which version of MAKE you are using (default is "make")
 # MAKE = make
@@ -106,7 +106,7 @@
 # naming the BLAS and LAPACK library (*.a or *.so) files.
 
 # This is probably slow ... it might connect to the Standard Reference BLAS:
-BLAS = -lblas -lgfortran
+BLAS = -lblas
 LAPACK = -llapack
 
 # NOTE: this next option for the "Goto BLAS" has nothing to do with a "goto"
@@ -162,8 +162,8 @@
 # The path is relative to where it is used, in CHOLMOD/Lib, CHOLMOD/MATLAB, etc.
 # You may wish to use an absolute path.  METIS is optional.  Compile
 # CHOLMOD with -DNPARTITION if you do not wish to use METIS.
-METIS_PATH = ../../metis-4.0
-METIS = ../../metis-4.0/libmetis.a
+#METIS_PATH = ../../metis-4.0
+#METIS = ../../metis-4.0/libmetis.a
 
 #------------------------------------------------------------------------------
 # UMFPACK configuration:
@@ -223,7 +223,7 @@
 # -DNSUNPERF	    for Solaris only.  If defined, do not use the Sun
 #			Performance Library
 
-CHOLMOD_CONFIG = $(GPU_CONFIG)
+CHOLMOD_CONFIG = $(GPU_CONFIG) -DNPARTITION
 
 # uncomment this line to compile CHOLMOD without METIS:
 # CHOLMOD_CONFIG = -DNPARTITION
@@ -239,7 +239,7 @@
 # -DHAVE_TBB        enable the use of Intel's Threading Building Blocks (TBB)
 
 # default, without timing, without TBB:
-SPQR_CONFIG =
+SPQR_CONFIG = -DNPARTITION
 # with TBB:
 # SPQR_CONFIG = -DHAVE_TBB
 
diff -Naur SuiteSparse/UMFPACK/Lib/GNUmakefile suitesparse-4.2patched/UMFPACK/Lib/GNUmakefile
--- UMFPACK/Lib/GNUmakefile	2012-05-28 01:23:50.000000000 +0200
+++ UMFPACK/Lib/GNUmakefile	2015-10-25 13:58:01.981040000 +0100
@@ -2,7 +2,10 @@
 # UMFPACK Makefile for compiling on Unix systems (for GNU Make)
 #-------------------------------------------------------------------------------
 
-default: libumfpack.a
+include ../../Makefile_SONAMES.inc
+SOVERSION = $(SONAME_UMFPACK)
+
+default: libumfpack.a libumfpack.so.$(SOVERSION)
 
 include ../../SuiteSparse_config/SuiteSparse_config.mk
 
@@ -96,15 +99,27 @@
 LL = $(addsuffix .o, $(subst umf_,umf_l_,$(UMFINT)))
 GN = $(addsuffix .o, $(subst umfpack_,umfpack_gn_,$(GENERIC)))
 
+DI_SL = $(addsuffix .oo, $(subst umf_,umf_di_,$(UMF)) $(subst umfpack_,umfpack_di_,$(USER)))
+DL_SL = $(addsuffix .oo, $(subst umf_,umf_dl_,$(UMF)) $(subst umfpack_,umfpack_dl_,$(USER)))
+ZI_SL = $(addsuffix .oo, $(subst umf_,umf_zi_,$(UMF)) $(subst umfpack_,umfpack_zi_,$(USER)))
+ZL_SL = $(addsuffix .oo, $(subst umf_,umf_zl_,$(UMF)) $(subst umfpack_,umfpack_zl_,$(USER)))
+II_SL = $(addsuffix .oo, $(subst umf_,umf_i_,$(UMFINT)))
+LL_SL = $(addsuffix .oo, $(subst umf_,umf_l_,$(UMFINT)))
+GN_SL = $(addsuffix .oo, $(subst umfpack_,umfpack_gn_,$(GENERIC)))
+
 #-------------------------------------------------------------------------------
 # compile each int and SuiteSparse_long routine (with no real/complex version)
 #-------------------------------------------------------------------------------
 
 umf_i_%.o: ../Source/umf_%.c $(INC)
 	$(C) -DDINT -c $< -o $@
+umf_i_%.oo: ../Source/umf_%.c $(INC)
+	$(C) -fPIC -DDINT -c $< -o $@
 
 umf_l_%.o: ../Source/umf_%.c $(INC)
 	$(C) -DDLONG -c $< -o $@
+umf_l_%.oo: ../Source/umf_%.c $(INC)
+	$(C) -fPIC -DDLONG -c $< -o $@
 
 #-------------------------------------------------------------------------------
 # compile each routine in the DI version
@@ -112,33 +127,53 @@
 
 umf_di_%.o: ../Source/umf_%.c $(INC)
 	$(C) -DDINT -c $< -o $@
+umf_di_%.oo: ../Source/umf_%.c $(INC)
+	$(C) -fPIC -DDINT -c $< -o $@
 
 umf_di_%hsolve.o: ../Source/umf_%tsolve.c $(INC)
 	$(C) -DDINT -DCONJUGATE_SOLVE -c $< -o $@
+umf_di_%hsolve.oo: ../Source/umf_%tsolve.c $(INC)
+	$(C) -fPIC -DDINT -DCONJUGATE_SOLVE -c $< -o $@
 
 umf_di_triplet_map_x.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DDINT -DDO_MAP -DDO_VALUES -c $< -o $@
+umf_di_triplet_map_x.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DDINT -DDO_MAP -DDO_VALUES -c $< -o $@
 
 umf_di_triplet_map_nox.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DDINT -DDO_MAP -c $< -o $@
+umf_di_triplet_map_nox.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DDINT -DDO_MAP -c $< -o $@
 
 umf_di_triplet_nomap_x.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DDINT -DDO_VALUES -c $< -o $@
+umf_di_triplet_nomap_x.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DDINT -DDO_VALUES -c $< -o $@
 
 umf_di_triplet_nomap_nox.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DDINT -c $< -o $@
+umf_di_triplet_nomap_nox.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DDINT -c $< -o $@
 
 umf_di_assemble_fixq.o: ../Source/umf_assemble.c $(INC)
 	$(C) -DDINT -DFIXQ -c $< -o $@
+umf_di_assemble_fixq.oo: ../Source/umf_assemble.c $(INC)
+	$(C) -fPIC -DDINT -DFIXQ -c $< -o $@
 
 umf_di_store_lu_drop.o: ../Source/umf_store_lu.c $(INC)
 	$(C) -DDINT -DDROP -c $< -o $@
+umf_di_store_lu_drop.oo: ../Source/umf_store_lu.c $(INC)
+	$(C) -fPIC -DDINT -DDROP -c $< -o $@
 
 umfpack_di_wsolve.o: ../Source/umfpack_solve.c $(INC)
 	$(C) -DDINT -DWSOLVE -c $< -o $@
+umfpack_di_wsolve.oo: ../Source/umfpack_solve.c $(INC)
+	$(C) -fPIC -DDINT -DWSOLVE -c $< -o $@
 
 umfpack_di_%.o: ../Source/umfpack_%.c $(INC)
 	$(C) -DDINT -c $< -o $@
+umfpack_di_%.oo: ../Source/umfpack_%.c $(INC)
+	$(C) -fPIC -DDINT -c $< -o $@
 
 #-------------------------------------------------------------------------------
 # compile each routine in the DL version
@@ -146,33 +181,53 @@
 
 umf_dl_%.o: ../Source/umf_%.c $(INC)
 	$(C) -DDLONG -c $< -o $@
+umf_dl_%.oo: ../Source/umf_%.c $(INC)
+	$(C) -fPIC -DDLONG -c $< -o $@
 
 umf_dl_%hsolve.o: ../Source/umf_%tsolve.c $(INC)
 	$(C) -DDLONG -DCONJUGATE_SOLVE -c $< -o $@
+umf_dl_%hsolve.oo: ../Source/umf_%tsolve.c $(INC)
+	$(C) -fPIC -DDLONG -DCONJUGATE_SOLVE -c $< -o $@
 
 umf_dl_triplet_map_x.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DDLONG -DDO_MAP -DDO_VALUES -c $< -o $@
+umf_dl_triplet_map_x.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DDLONG -DDO_MAP -DDO_VALUES -c $< -o $@
 
 umf_dl_triplet_map_nox.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DDLONG -DDO_MAP -c $< -o $@
+umf_dl_triplet_map_nox.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DDLONG -DDO_MAP -c $< -o $@
 
 umf_dl_triplet_nomap_x.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DDLONG -DDO_VALUES -c $< -o $@
+umf_dl_triplet_nomap_x.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DDLONG -DDO_VALUES -c $< -o $@
 
 umf_dl_triplet_nomap_nox.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DDLONG -c $< -o $@
+umf_dl_triplet_nomap_nox.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DDLONG -c $< -o $@
 
 umf_dl_assemble_fixq.o: ../Source/umf_assemble.c $(INC)
 	$(C) -DDLONG -DFIXQ -c $< -o $@
+umf_dl_assemble_fixq.oo: ../Source/umf_assemble.c $(INC)
+	$(C) -fPIC -DDLONG -DFIXQ -c $< -o $@
 
 umf_dl_store_lu_drop.o: ../Source/umf_store_lu.c $(INC)
 	$(C) -DDLONG -DDROP -c $< -o $@
+umf_dl_store_lu_drop.oo: ../Source/umf_store_lu.c $(INC)
+	$(C) -fPIC -DDLONG -DDROP -c $< -o $@
 
 umfpack_dl_wsolve.o: ../Source/umfpack_solve.c $(INC)
 	$(C) -DDLONG -DWSOLVE -c $< -o $@
+umfpack_dl_wsolve.oo: ../Source/umfpack_solve.c $(INC)
+	$(C) -fPIC -DDLONG -DWSOLVE -c $< -o $@
 
 umfpack_dl_%.o: ../Source/umfpack_%.c $(INC)
 	$(C) -DDLONG -c $< -o $@
+umfpack_dl_%.oo: ../Source/umfpack_%.c $(INC)
+	$(C) -fPIC -DDLONG -c $< -o $@
 
 #-------------------------------------------------------------------------------
 # compile each routine in the ZI version
@@ -180,33 +235,53 @@
 
 umf_zi_%.o: ../Source/umf_%.c $(INC)
 	$(C) -DZINT -c $< -o $@
+umf_zi_%.oo: ../Source/umf_%.c $(INC)
+	$(C) -fPIC -DZINT -c $< -o $@
 
 umf_zi_%hsolve.o: ../Source/umf_%tsolve.c $(INC)
 	$(C) -DZINT -DCONJUGATE_SOLVE -c $< -o $@
+umf_zi_%hsolve.oo: ../Source/umf_%tsolve.c $(INC)
+	$(C) -fPIC -DZINT -DCONJUGATE_SOLVE -c $< -o $@
 
 umf_zi_triplet_map_x.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DZINT -DDO_MAP -DDO_VALUES -c $< -o $@
+umf_zi_triplet_map_x.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DZINT -DDO_MAP -DDO_VALUES -c $< -o $@
 
 umf_zi_triplet_map_nox.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DZINT -DDO_MAP -c $< -o $@
+umf_zi_triplet_map_nox.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DZINT -DDO_MAP -c $< -o $@
 
 umf_zi_triplet_nomap_x.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DZINT -DDO_VALUES -c $< -o $@
+umf_zi_triplet_nomap_x.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DZINT -DDO_VALUES -c $< -o $@
 
 umf_zi_triplet_nomap_nox.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DZINT -c $< -o $@
+umf_zi_triplet_nomap_nox.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DZINT -c $< -o $@
 
 umf_zi_assemble_fixq.o: ../Source/umf_assemble.c $(INC)
 	$(C) -DZINT -DFIXQ -c $< -o $@
+umf_zi_assemble_fixq.oo: ../Source/umf_assemble.c $(INC)
+	$(C) -fPIC -DZINT -DFIXQ -c $< -o $@
 
 umf_zi_store_lu_drop.o: ../Source/umf_store_lu.c $(INC)
 	$(C) -DZINT -DDROP -c $< -o $@
+umf_zi_store_lu_drop.oo: ../Source/umf_store_lu.c $(INC)
+	$(C) -fPIC -DZINT -DDROP -c $< -o $@
 
 umfpack_zi_wsolve.o: ../Source/umfpack_solve.c $(INC)
 	$(C) -DZINT -DWSOLVE -c $< -o $@
+umfpack_zi_wsolve.oo: ../Source/umfpack_solve.c $(INC)
+	$(C) -fPIC -DZINT -DWSOLVE -c $< -o $@
 
 umfpack_zi_%.o: ../Source/umfpack_%.c $(INC)
 	$(C) -DZINT -c $< -o $@
+umfpack_zi_%.oo: ../Source/umfpack_%.c $(INC)
+	$(C) -fPIC -DZINT -c $< -o $@
 
 #-------------------------------------------------------------------------------
 # compile each routine in the ZL version
@@ -214,33 +289,53 @@
 
 umf_zl_%.o: ../Source/umf_%.c $(INC)
 	$(C) -DZLONG -c $< -o $@
+umf_zl_%.oo: ../Source/umf_%.c $(INC)
+	$(C) -fPIC -DZLONG -c $< -o $@
 
 umf_zl_%hsolve.o: ../Source/umf_%tsolve.c $(INC)
 	$(C) -DZLONG -DCONJUGATE_SOLVE -c $< -o $@
+umf_zl_%hsolve.oo: ../Source/umf_%tsolve.c $(INC)
+	$(C) -fPIC -DZLONG -DCONJUGATE_SOLVE -c $< -o $@
 
 umf_zl_triplet_map_x.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DZLONG -DDO_MAP -DDO_VALUES -c $< -o $@
+umf_zl_triplet_map_x.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DZLONG -DDO_MAP -DDO_VALUES -c $< -o $@
 
 umf_zl_triplet_map_nox.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DZLONG -DDO_MAP -c $< -o $@
+umf_zl_triplet_map_nox.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DZLONG -DDO_MAP -c $< -o $@
 
 umf_zl_triplet_nomap_x.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DZLONG -DDO_VALUES -c $< -o $@
+umf_zl_triplet_nomap_x.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DZLONG -DDO_VALUES -c $< -o $@
 
 umf_zl_triplet_nomap_nox.o: ../Source/umf_triplet.c $(INC)
 	$(C) -DZLONG -c $< -o $@
+umf_zl_triplet_nomap_nox.oo: ../Source/umf_triplet.c $(INC)
+	$(C) -fPIC -DZLONG -c $< -o $@
 
 umf_zl_assemble_fixq.o: ../Source/umf_assemble.c $(INC)
 	$(C) -DZLONG -DFIXQ -c $< -o $@
+umf_zl_assemble_fixq.oo: ../Source/umf_assemble.c $(INC)
+	$(C) -fPIC -DZLONG -DFIXQ -c $< -o $@
 
 umf_zl_store_lu_drop.o: ../Source/umf_store_lu.c $(INC)
 	$(C) -DZLONG -DDROP -c $< -o $@
+umf_zl_store_lu_drop.oo: ../Source/umf_store_lu.c $(INC)
+	$(C) -fPIC -DZLONG -DDROP -c $< -o $@
 
 umfpack_zl_wsolve.o: ../Source/umfpack_solve.c $(INC)
 	$(C) -DZLONG -DWSOLVE -c $< -o $@
+umfpack_zl_wsolve.oo: ../Source/umfpack_solve.c $(INC)
+	$(C) -fPIC -DZLONG -DWSOLVE -c $< -o $@
 
 umfpack_zl_%.o: ../Source/umfpack_%.c $(INC)
 	$(C) -DZLONG -c $< -o $@
+umfpack_zl_%.oo: ../Source/umfpack_%.c $(INC)
+	$(C) -fPIC -DZLONG -c $< -o $@
 
 #-------------------------------------------------------------------------------
 # Create the generic routines (GN) using a generic rule
@@ -248,6 +343,8 @@
 
 umfpack_gn_%.o: ../Source/umfpack_%.c $(INC)
 	$(C) -c $< -o $@
+umfpack_gn_%.oo: ../Source/umfpack_%.c $(INC)
+	$(C) -fPIC -c $< -o $@
 
 #-------------------------------------------------------------------------------
 # Create the libumfpack.a library
@@ -257,8 +354,9 @@
 	$(ARCHIVE)  libumfpack.a $^
 	- $(RANLIB) libumfpack.a
 
-so: $(II) $(LL) $(GN) $(DI) $(DL) $(ZI) $(ZL)
-	gcc -shared -Wl,-soname,libumfpack.so -o libumfpack.so $^
+libumfpack.so.$(SOVERSION): $(II_SL) $(LL_SL) $(GN_SL) $(DI_SL) $(DL_SL) $(ZI_SL) $(ZL_SL)
+	$(CC) $(LDFLAGS) -shared $^ -lm -lblas ../../AMD/Lib/libamd.so ../../CHOLMOD/Lib/libcholmod.so ../../SuiteSparse_config/libsuitesparseconfig_pic.a -Wl,-soname -Wl,$@ -o $@
+	ln -s $@ libumfpack.so
 
 #-------------------------------------------------------------------------------
 # Remove all but the files in the original distribution
@@ -269,3 +367,6 @@
 
 clean:
 	- $(RM) $(CLEAN)
+	-$(RM) *.oo
+	-$(RM) *.a
+	-$(RM) *.so*
diff -Naur SuiteSparse/UMFPACK/Makefile suitesparse-4.2patched/UMFPACK/Makefile
--- UMFPACK/Makefile	2013-04-25 23:33:10.000000000 +0200
+++ UMFPACK/Makefile	2015-10-25 15:03:57.231945563 +0100
@@ -64,6 +64,8 @@
 
 # install UMFPACK
 install:
+	$(CP) Lib/libumfpack.so $(INSTALL_LIB)/libumfpack.$(VERSION).so
+	( cd $(INSTALL_LIB) ; ln -sf libumfpack.$(VERSION).so libumfpack.so )
 	$(CP) Lib/libumfpack.a $(INSTALL_LIB)/libumfpack.$(VERSION).a
 	( cd $(INSTALL_LIB) ; ln -sf libumfpack.$(VERSION).a libumfpack.a )
 	$(CP) Include/*.h $(INSTALL_INCLUDE)
